<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE app [
 <!ENTITY name "VcfEnsemblReg">
 <!ENTITY package "com.github.lindenb.jvarkit.tools.ensemblreg">
]>
<app xmlns="http://github.com/lindenb/jvarkit/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:svg="http://www.w3.org/2000/svg" app="&name;" package="&package;" __placeholder__="1">
<description>Annotate a VCF with the UCSC genome hub tracks for Ensembl Regulation</description>
<snippet id="tmp-dir"/>
<input type="vcf"/>
<output type="vcf"/>

<options>
	<option name="trackDBUrl" type="string" opt="d" longopt="trackDBUrl" default="http://ngs.sanger.ac.uk/production/ensembl/regulation/hg19/trackDb.txt" >
		<description>trackDB.txt URL.</description>
	</option>
</options>


<documentation>
<h:h3>Example</h:h3>

original vcf:

<h:pre><!--  $ curl -kLs "https://raw.githubusercontent.com/jamescasbon/PyVCF/master/vcf/test/gatk.vcf" | cut -f 1-8
##fileformat=VCFv4.1
(...)
#CHROM	POS	ID	REF	ALT	QUAL	FILTER	INFO
chr22	42522392	rs28371738	G	A	2951.95	.	AC=2;AF=0.143;AN=14;BaseQRankSum=0.375;DB;DP=1506;DS;Dels=0.00;FS=0.000;HRun=0;HaplotypeScore=123.5516;MQ=253.92;MQ0=0;MQRankSum=0.685;QD=5.90;ReadPosRankSum=0.590
chr22	42522613	rs1135840	G	C	11611.03	.	AC=6;AF=0.429;AN=14;BaseQRankSum=16.289;DB;DP=1518;DS;Dels=0.03;FS=0.000;HRun=0;HaplotypeScore=142.5716;MQ=242.46;MQ0=0;MQRankSum=2.010;QD=9.16;ReadPosRankSum=-1.731
chr22	42522755	.	C	G	36.98	.	AC=1;AF=0.071;AN=14;BaseQRankSum=-14.866;DP=1527;DS;Dels=0.01;FS=0.000;HRun=0;HaplotypeScore=253.4254;MQ=197.36;MQ0=2;MQRankSum=-10.810;QD=0.15;ReadPosRankSum=-17.244
chr22	42523003	rs116917064	A	G	7113.55	.	AC=8;AF=0.571;AN=14;BaseQRankSum=6.026;DB;DP=1433;DS;Dels=0.00;FS=0.000;HRun=1;HaplotypeScore=101.7894;MQ=182.04;MQ0=0;MQRankSum=-2.501;QD=4.96;ReadPosRankSum=8.294
chr22	42523077	.	A	G	54.31	.	AC=1;AF=0.071;AN=14;BaseQRankSum=-0.563;DP=1521;DS;Dels=0.00;FS=0.000;HRun=0;HaplotypeScore=54.8434;MQ=164.04;MQ0=1;MQRankSum=-2.419;QD=2.59;ReadPosRankSum=-1.229
(...)
 --></h:pre>
execute:

<h:pre><!-- $  curl -kLs "https://raw.githubusercontent.com/jamescasbon/PyVCF/master/vcf/test/gatk.vcf" |\
   java -jar dist/vcfensemblreg.jar > out.vcf

 --></h:pre>

out.vcf:

<h:pre><!--  ##fileformat=VCFv4.1
(...)
##INFO=<ID=ATF3,Number=1,Type=Float,Description="Overlap summary of ATF3 ChipSeq binding peaks across avail</h:h3>tasets http://ngs.sanger.ac.uk/production/ensembl/regulation//hg19/tf
bs/ATF3.bw">
##INFO=<ID=BAF155,Number=1,Type=Float,Description="Overlap summary of BAF155 ChipSeq binding peaks across a</h:h3>e datasets http://ngs.sanger.ac.uk/production/ensembl/regulation//hg1
9/tfbs/BAF155.bw">
##INFO=<ID=BAF170,Number=1,Type=Float,Description="Overlap summary of BAF170 ChipSeq binding peaks across a</h:h3>e datasets http://ngs.sanger.ac.uk/production/ensembl/regulation//hg1
9/tfbs/BAF170.bw">
##INFO=<ID=BuildOverview,Number=1,Type=String,Description="Ensembl Regulatory annotation of regional functi</h:h3>://ngs.sanger.ac.uk/production/ensembl/regulation//hg19/overview/RegB
uild.bb">
(...)
#CHROM	POS	ID	REF	ALT	QUAL	FILTER	INFO
chr22	42522392	rs28371738	G	A	2951.95	.	AC=2;AF=0.143;AN=14;BaseQRankSum=0.375;BuildOverview=open_646005|UnannotatedOpenChromatinRegions;DB;DP=1506;DS;
Dels=0.00;FS=0.000;HRun=0;HaplotypeScore=123.5516;MQ=253.92;MQ0=0;MQRankSum=0.685;QD=5.90;ReadPosRankSum=0.590;Segway_17_18=1.0;Segway_17_20=2.0;Segway_17_21=3.0;Segway_17_22=1.0;Segw
ay_17_5=9.0;Segway_17_7=1.0;Segway_17_A549_projected=open_646005|InactiveRegions;Segway_17_GM12878_projected=open_646005|InactiveRegions;Segway_17_H1HESC_projected=open_646005|Inactiv
eRegions;Segway_17_HELAS3_projected=open_646005|InactiveRegions;Segway_17_HEPG2_projected=open_646005|InactiveRegions;Segway_17_HMEC_projected=open_646005|InactiveRegions;Segway_17_HS
MM_projected=open_646005|InactiveRegions;Segway_17_HUVEC_projected=open_646005|InactiveRegions;Segway_17_K562_projected=open_646005|InactiveRegions;Segway_17_NHA_projected=open_646005
|InactiveRegions;Segway_17_NHDFAD_projected=open_646005|InactiveRegions;Segway_17_NHEK_projected=open_646005|UnannotatedActiveOpenChromatinRegions;Segway_17_NHLF_projected=open_646005
|InactiveRegions
chr22	42522613	rs1135840	G	C	11611.03	.	AC=6;AF=0.429;AN=14;BaseQRankSum=16.289;DB;DP=1518;DS;Dels=0.03;FS=0.000;HRun=0;HaplotypeScore=142.5716
;MQ=242.46;MQ0=0;MQRankSum=2.010;QD=9.16;ReadPosRankSum=-1.731;Segway_17_18=1.0;Segway_17_20=4.0;Segway_17_21=3.0;Segway_17_22=1.0;Segway_17_5=7.0;Segway_17_7=1.0
chr22	42522755	.	C	G	36.98	.	AC=1;AF=0.071;AN=14;BaseQRankSum=-14.866;DP=1527;DS;Dels=0.01;FS=0.000;HRun=0;HaplotypeScore=253.4254;MQ=197.36;MQ0=2;M
QRankSum=-10.810;QD=0.15;ReadPosRankSum=-17.244;Segway_17_15=1.0;Segway_17_20=3.0;Segway_17_21=1.0;Segway_17_22=1.0;Segway_17_3=1.0;Segway_17_5=10.0
chr22	42523003	rs116917064	A	G	7113.55	.	AC=8;AF=0.571;AN=14;BaseQRankSum=6.026;DB;DP=1433;DS;Dels=0.00;FS=0.000;HRun=1;HaplotypeScore=101.7894;MQ=182.0
4;MQ0=0;MQRankSum=-2.501;QD=4.96;ReadPosRankSum=8.294;Segway_17_15=1.0;Segway_17_18=1.0;Segway_17_20=2.0;Segway_17_22=3.0;Segway_17_3=1.0;Segway_17_5=9.0
chr22	42523077	.	A	G	54.31	.	AC=1;AF=0.071;AN=14;BaseQRankSum=-0.563;DP=1521;DS;Dels=0.00;FS=0.000;HRun=0;HaplotypeScore=54.8434;MQ=164.04;MQ0=1;MQR
ankSum=-2.419;QD=2.59;ReadPosRankSum=-1.229;Segway_17_18=1.0;Segway_17_20=1.0;Segway_17_22=4.0;Segway_17_24=1.0;Segway_17_3=1.0;Segway_17_5=9.0;Segway_17_DND41_segments=24_gene_86550|
TranscriptionAssociated
chr22	42523209	rs28371730	T	C	15556.89	.	AC=8;AF=0.571;AN=14;BaseQRankSum=3.458;DB;DP=1509;DS;Dels=0.01;FS=0.000;HRun=0;HaplotypeScore=120.8206;
MQ=221.07;MQ0=0;MQRankSum=-4.945;QD=10.31;ReadPosRankSum=0.639;Segway_17_18=1.0;Segway_17_20=1.0;Segway_17_22=4.0;Segway_17_24=1.0;Segway_17_3=1.0;Segway_17_5=9.0;Segway_17_DND41_segm
ents=24_gene_86550|TranscriptionAssociated
chr22	42523211	rs2004511	T	C	2445.52	.	AC=2;AF=0.143;AN=14;BaseQRankSum=10.587;DB;DP=1509;DS;Dels=0.00;FS=0.000;HRun=0;HaplotypeScore=102.7564;MQ=221.
50;MQ0=0;MQRankSum=-6.926;QD=4.89;ReadPosRankSum=2.057;Segway_17_18=1.0;Segway_17_20=1.0;Segway_17_22=4.0;Segway_17_24=1.0;Segway_17_3=1.0;Segway_17_5=9.0;Segway_17_DND41_segments=24_
gene_86550|TranscriptionAssociated
chr22	42523409	rs1985842	G	T	6801.90	.	AC=6;AF=0.429;AN=14;BaseQRankSum=20.509;BuildOverview=open_646006|UnannotatedOpenChromatinRegions;DB;DP=1454;DS
;Dels=0.00;FS=0.000;HRun=0;HaplotypeScore=150.8967;MQ=200.12;MQ0=0;MQRankSum=4.472;QD=5.65;ReadPosRankSum=9.396;Segway_17_18=1.0;Segway_17_20=3.0;Segway_17_21=1.0;Segway_17_22=4.0;Seg
way_17_24=2.0;Segway_17_5=6.0;Segway_17_A549_projected=open_646006|InactiveRegions;Segway_17_DND41_segments=24_gene_86550|TranscriptionAssociated;Segway_17_GM12878_projected=open_6460
06|InactiveRegions;Segway_17_H1HESC_projected=open_646006|InactiveRegions;Segway_17_HELAS3_projected=open_646006|InactiveRegions;Segway_17_HEPG2_projected=open_646006|InactiveRegions;
Segway_17_HMEC_projected=open_646006|InactiveRegions;Segway_17_HSMMT_segments=24_gene_74042|TranscriptionAssociated;Segway_17_HSMM_projected=open_646006|InactiveRegions;Segway_17_HUVE
C_projected=open_646006|InactiveRegions;Segway_17_K562_projected=open_646006|InactiveRegions;Segway_17_NHA_projected=open_646006|InactiveRegions;Segway_17_NHDFAD_projected=open_646006
|InactiveRegions;Segway_17_NHEK_projected=open_646006|InactiveRegions;Segway_17_NHLF_projected=open_646006|InactiveRegions
chr22	42523805	rs28371725	C	T	1637.33	.	AC=1;AF=0.071;AN=14;BaseQRankSum=-0.379;BuildOverview=open_646007|UnannotatedOpenChromatinRegions;DB;DP=1516;DS
;Dels=0.00;FS=0.000;HRun=2;HaplotypeScore=77.2321;MQ=226.05;MQ0=0;MQRankSum=2.862;QD=6.55;ReadPosRankSum=0.064;Segway_17_11=1.0;Segway_17_13=1.0;Segway_17_15=1.0;Segway_17_20=5.0;Segw
ay_17_21=3.0;Segway_17_22=2.0;Segway_17_3=2.0;Segway_17_5=2.0;Segway_17_A549_projected=open_646007|InactiveRegions;Segway_17_GM12878_projected=open_646007|InactiveRegions;Segway_17_H1
HESC_projected=open_646007|InactiveRegions;Segway_17_HELAS3_projected=open_646007|UnannotatedActiveOpenChromatinRegions;Segway_17_HEPG2_projected=open_646007|InactiveRegions;Segway_17
_HMEC_projected=open_646007|UnannotatedActiveOpenChromatinRegions;Segway_17_HSMM_projected=open_646007|InactiveRegions;Segway_17_HUVEC_projected=open_646007|InactiveRegions;Segway_17_
K562_projected=open_646007|InactiveRegions;Segway_17_NHA_projected=open_646007|InactiveRegions;Segway_17_NHDFAD_projected=open_646007|InactiveRegions;Segway_17_NHEK_projected=open_646
007|UnannotatedActiveOpenChromatinRegions;Segway_17_NHLF_projected=open_646007|InactiveRegions
chr22	42523943	rs16947	A	G	23661.10	.	AC=8;AF=0.571;AN=14;BaseQRankSum=4.602;BuildOverview=open_646007|UnannotatedOpenChromatinRegions;DB;DP=1514;DS;
Dels=0.00;FS=0.000;HRun=0;HaplotypeScore=38.3217;MQ=238.64;MQ0=0;MQRankSum=2.485;QD=15.63;ReadPosRankSum=3.749;Segway_17_11=2.0;Segway_17_13=1.0;Segway_17_15=1.0;Segway_17_18=1.0;Segw
ay_17_20=6.0;Segway_17_21=1.0;Segway_17_22=2.0;Segway_17_3=1.0;Segway_17_5=2.0;Segway_17_A549_projected=open_646007|InactiveRegions;Segway_17_GM12878_projected=open_646007|InactiveReg
ions;Segway_17_H1HESC_projected=open_646007|InactiveRegions;Segway_17_HELAS3_projected=open_646007|UnannotatedActiveOpenChromatinRegions;Segway_17_HEPG2_projected=open_646007|Inactive
Regions;Segway_17_HMEC_projected=open_646007|UnannotatedActiveOpenChromatinRegions;Segway_17_HSMM_projected=open_646007|InactiveRegions;Segway_17_HUVEC_projected=open_646007|InactiveR
egions;Segway_17_K562_projected=open_646007|InactiveRegions;Segway_17_NHA_projected=open_646007|InactiveRegions;Segway_17_NHDFAD_projected=open_646007|InactiveRegions;Segway_17_NHEK_p
rojected=open_646007|UnannotatedActiveOpenChromatinRegions;Segway_17_NHLF_projected=open_646007|InactiveRegions
chr22	42524150	.	C	G	3758.65	.	AC=8;AF=0.571;AN=14;BaseQRankSum=24.314;BuildOverview=open_646008|UnannotatedOpenChromatinRegions;DP=1506;DS;Dels=0.00;
FS=0.000;HRun=1;HaplotypeScore=172.5901;MQ=242.92;MQ0=0;MQRankSum=11.537;QD=2.50;ReadPosRankSum=-9.185;Segway_17_11=3.0;Segway_17_13=1.0;Segway_17_18=2.0;Segway_17_20=10.0;Segway_17_5
=1.0;Segway_17_A549_projected=open_646008|InactiveRegions;Segway_17_GM12878_projected=open_646008|InactiveRegions;Segway_17_H1HESC_projected=open_646008|UnannotatedActiveOpenChromatin
Regions;Segway_17_HELAS3_projected=open_646008|InactiveRegions;Segway_17_HEPG2_projected=open_646008|InactiveRegions;Segway_17_HMEC_projected=open_646008|InactiveRegions;Segway_17_HSM
M_projected=open_646008|InactiveRegions;Segway_17_HUVEC_projected=open_646008|InactiveRegions;Segway_17_K562_projected=open_646008|InactiveRegions;Segway_17_NHA_projected=open_646008|
InactiveRegions;Segway_17_NHDFAD_projected=open_646008|InactiveRegions;Segway_17_NHEK_projected=open_646008|InactiveRegions;Segway_17_NHLF_projected=open_646008|InactiveRegions
chr22	42524435	rs1807313	T	A	5252.25	.	AC=3;AF=0.214;AN=14;BaseQRankSum=-0.192;DB;DP=1526;DS;Dels=0.01;FS=0.000;HRun=1;HaplotypeScore=152.3866;MQ=242.
06;MQ0=0;MQRankSum=1.923;QD=9.99;ReadPosRankSum=3.008;Segway_17_11=4.0;Segway_17_13=1.0;Segway_17_15=1.0;Segway_17_18=1.0;Segway_17_20=5.0;Segway_17_21=1.0;Segway_17_24=1.0;Segway_17_
3=1.0;Segway_17_5=1.0;Segway_17_7=1.0;Segway_17_HEPG2_segments=24_gene_85862|TranscriptionAssociated
chr22	42524696	rs58440431	T	C	6423.61	.	AC=2;AF=0.143;AN=14;BaseQRankSum=3.119;BuildOverview=open_646009|UnannotatedOpenChromatinRegions;DB;DP=1509;DS;
Dels=0.00;FS=0.000;HRun=0;HaplotypeScore=53.0005;MQ=230.78;MQ0=0;MQRankSum=2.825;QD=12.85;ReadPosRankSum=2.051;Segway_17_11=3.0;Segway_17_13=1.0;Segway_17_15=1.0;Segway_17_18=1.0;Segw
ay_17_20=4.0;Segway_17_21=2.0;Segway_17_24=1.0;Segway_17_5=3.0;Segway_17_7=1.0;Segway_17_A549_projected=open_646009|InactiveRegions;Segway_17_GM12878_projected=open_646009|InactiveReg
ions;Segway_17_H1HESC_projected=open_646009|InactiveRegions;Segway_17_HELAS3_projected=open_646009|UnannotatedActiveOpenChromatinRegions;Segway_17_HEPG2_projected=open_646009|Inactive
Regions;Segway_17_HEPG2_segments=24_gene_85862|TranscriptionAssociated;Segway_17_HMEC_projected=open_646009|UnannotatedActiveOpenChromatinRegions;Segway_17_HSMM_projected=open_646009|
UnannotatedActiveOpenChromatinRegions;Segway_17_HUVEC_projected=open_646009|UnannotatedActiveOpenChromatinRegions;Segway_17_K562_projected=open_646009|UnannotatedActiveOpenChromatinRe
gions;Segway_17_NHA_projected=open_646009|InactiveRegions;Segway_17_NHDFAD_projected=open_646009|InactiveRegions;Segway_17_NHEK_projected=open_646009|InactiveRegions;Segway_17_NHLF_pr
ojected=open_646009|InactiveRegions
 --></h:pre>
</documentation>

<!-- __PLACEHOLDER__ --></app>
